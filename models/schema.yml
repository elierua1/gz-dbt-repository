 # schema.yml

 version: 2

 sources: 
   - name: raw
     schema: gz_raw_data
     tables:
       - name: sales
         identifier: raw_gz_sales
         description: sales of Greenweez / we have one row per product_id found in each orders_id

        # Freshness testing - make sure to fill in the ...
         loaded_at_field: "CAST(date_date AS TIMESTAMP)"
         freshness:
           warn_after: {count: 90, period: day}

         columns:
           - name: date_date 
             description: date of purchase
           - name: orders_id
             description: id of the order
           - name: pdt_id
             description: id of the product inside a specific order
           - name: revenue
             description: the revenue generated by the product
           - name: quantity
             description: quantity of a specific product inside the order
         tests:
           - unique:
              column_name: "(orders_id || '-' || pdt_id)"
       - name: product
         identifier: raw_gz_product
         description: information about the products, one row per product
         columns:
           - name: products_id 
             description: id of the product
             tests:
               - unique
               - not_null
           - name: purchse_price
             description: price of the product
       - name: ship
         identifier: raw_gz_ship
         description: Shipping information of the orders / we have one row per order_id 
         columns:
           - name: orders_id 
             description: id of the order
             tests:
               - unique
               - not_null
           - name: shipping_fee
             description: the price of shipping for each order
           - name: log_cost
             description: the cost of logistics for each order
           - name: ship_cost
             description: the cost of shipping for each order